<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quicken Secure - Data Protection Solutions</title>
    <!-- Updated favicon link to a working placeholder -->
    <link rel="icon" type="image/png" href="https://placehold.co/32x32/3816CC/FFFFFF?text=Q">
    
    <!-- Tailwind CSS for AI module and form styling -->
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        /* --- Global Styles --- */
        :root {
            --primary-color: #3816CC;
            --secondary-color: #6c757d;
            --dark-blue: #1a2533;
            --light-gray: #f4f7f6;
            --text-color: #333;
        }

        body {
            /* === FONT UPDATED === */
            /* "Haffer" is now the first choice. */
            font-family: "Haffer", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            margin: 0;
            padding: 0;
            color: var(--text-color);
            line-height: 1.6;
            overflow-x: hidden;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cdefs%3E%3Cfilter id='blur-filter'%3E%3CfeGaussianBlur stdDeviation='1.5'%3E%3C/feGaussianBlur%3E%3C/filter%3E%3Cg id='icons' fill='%23cccccc' opacity='0.1' filter='url(%23blur-filter)'%3E%3Cpath d='M50 50 h40 v100 h-40 z M100 80 h40 v70 h-40 z M150 30 h40 v120 h-40 z' /%3E%3Cpath d='M250 150 a50 50 0 1 0 100 0 a50 50 0 1 0 -100 0' /%3E%3Cpath d='M300 150 l50 -50' /%3E%3Cpath d='M80 300 h20 l-10 20 l-10 -20 h20 v-20 h-20 l10 -20 l10 20 h-20 z' /%3E%3Cpath d='M350,280 S330,270 350,260 S370,250 350,240 M350,235 v50' /%3E%3C/g%3E%3C/defs%3E%3Cuse href='%23icons' transform='translate(20, 50) scale(0.8)' /%3E%3Cuse href='%23icons' transform='translate(-150, 200) scale(1.2)' /%3E%3Cuse href='%23icons' transform='translate(200, -100) scale(0.6)' /%3E%3C/svg%3E"), linear-gradient(-45deg, #eef1f5, #e6e9f0, #f4f7f6, #e9edf2);
            background-size: 400px, 400% 400%;
            animation: gradientAnimation 20s ease infinite;
        }

        /* --- Cursor Spotlight Style --- */
        .cursor-spotlight {
            position: fixed;
            top: 0;
            left: 0;
            pointer-events: none;
            width: 500px;
            height: 500px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(56, 22, 204, 0.15) 0%, rgba(56, 22, 204, 0) 60%);
            transform: translate(-50%, -50%);
            z-index: 9999;
            transition: width 0.3s ease, height 0.3s ease;
        }

        .cursor-spotlight.interactive {
            width: 250px;
            height: 250px;
        }

        @keyframes gradientAnimation {
            0% {
                background-position: 0% 50%;
            }

            50% {
                background-position: 100% 50%;
            }

            100% {
                background-position: 0% 50%;
            }
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        h1,
        h2,
        h3 {
            color: var(--dark-blue);
            margin-bottom: 20px;
        }

        section {
            padding: 60px 0;
            text-align: center;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .header {
            background-color: rgba(255, 255, 255, 0.8);
            padding: 15px 0;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            backdrop-filter: blur(5px);
            border-bottom: 1px solid #eee;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        main {
            padding-top: 75px;
        }

        .logo-img {
            height: 30px;
            display: block;
        }

        .hero {
            position: relative;
            height: 500px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            text-align: center;
            color: #fff;
            padding: 20px;
        }

        .hero-video {
            position: absolute;
            top: 50%;
            left: 50%;
            min-width: 100%;
            min-height: 100%;
            width: auto;
            height: auto;
            z-index: -1;
            transform: translate(-50%, -50%);
            background-size: cover;
            object-fit: cover;
        }

        .hero-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(26, 37, 51, 0.6);
            z-index: 0;
        }

        .hero-content {
            position: relative;
            z-index: 1;
        }

        .hero-content h1 {
            font-size: 3em;
            margin-bottom: 10px;
            color: #fff;
            animation: fadeInUp 0.8s ease-out;
        }

        .hero-content p {
            font-size: 1.2em;
            margin-bottom: 30px;
            animation: fadeInUp 0.8s ease-out 0.2s;
            animation-fill-mode: both;
        }

        .cta-button {
            display: inline-block;
            background-color: var(--primary-color);
            color: #fff;
            padding: 14px 30px;
            text-decoration: none;
            border-radius: 5px;
            font-weight: bold;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            border: 1px solid transparent;
            cursor: pointer; /* Added for button elements */
        }
        /* Style for disabled button */
        .cta-button:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }
        .cta-button:disabled:hover {
            background-color: #ccc;
            color: #fff;
            border-color: transparent;
        }


        .cta-button:hover {
            background-color: #fff;
            color: var(--primary-color);
            border: 1px solid var(--primary-color);
        }

        .cta-secondary {
            background-color: var(--secondary-color);
        }

        .cta-secondary:hover {
            background-color: #fff;
            color: var(--secondary-color);
            border: 1px solid var(--secondary-color);
        }

        #features {
            background-color: transparent;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }

        .feature-card {
            background-color: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(5px);
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }

        .feature-icon {
            font-size: 2.5em;
            margin-bottom: 15px;
            height: 1em;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .feature-img-icon {
            height: 1em;
        }

        .feature-card h3 {
            font-size: 1.2em;
            color: var(--primary-color);
        }

        #video-section {
            background-color: var(--dark-blue);
            color: #fff;
        }

        .video-content-wrapper {
            display: flex;
            align-items: center;
            gap: 50px;
        }

        .video-column,
        .text-column {
            flex: 1;
        }

        .text-column {
            text-align: left;
        }

        .text-column h2 {
            color: #fff;
            font-size: 2.2em;
        }

        .video-container {
            position: relative;
            width: 100%;
            padding-bottom: 56.25%;
            height: 0;
            overflow: hidden;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: 0;
        }

        #pricing {
            background-color: transparent;
        }

        .pricing-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-top: 40px;
            align-items: center;
        }

        .pricing-card {
            background-color: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(5px);
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 30px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            display: flex;
            flex-direction: column;
            transition: all 0.3s ease;
        }

        .pricing-card:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.12);
            z-index: 10;
        }

        .pricing-card.popular {
            border-top: 5px solid var(--primary-color);
            transform: scale(1.05);
            position: relative;
            z-index: 5;
        }

        .popular-badge {
            background-color: var(--primary-color);
            color: #fff;
            font-size: 0.8em;
            font-weight: bold;
            padding: 5px 15px;
            border-radius: 15px;
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
        }

        .pricing-card h3 {
            font-size: 1.5em;
            margin-bottom: 10px;
        }

        .price-display {
            margin: 10px 0 15px 0;
        }

        .price-duration {
            font-size: 2.8em;
            font-weight: bold;
            color: var(--dark-blue);
            line-height: 1.1;
        }

        .price-amount {
            font-size: 1.8em;
            color: #555;
            line-height: 1.1;
        }

        .pricing-card ul {
            list-style: none;
            padding: 0;
            margin: 20px 0;
            flex-grow: 1;
            text-align: left;
        }

        .pricing-card li {
            margin-bottom: 10px;
            padding-left: 20px;
            position: relative;
        }

        .pricing-card li::before {
            content: '✓';
            color: #28a745;
            position: absolute;
            left: 0;
        }

        .toggle-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            margin-bottom: 30px;
            font-weight: 500;
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
        }

        input:checked+.slider {
            background-color: var(--primary-color);
        }

        input:focus+.slider {
            box-shadow: 0 0 1px var(--primary-color);
        }

        input:checked+.slider:before {
            transform: translateX(26px);
        }

        .slider.round {
            border-radius: 34px;
        }

        .slider.round:before {
            border-radius: 50%;
        }

        @keyframes scrollMarquee {
            from {
                transform: translateX(0);
            }

            to {
                transform: translateX(-50%);
            }
        }

        #testimonials {
            background-color: transparent;
        }

        .testimonial-marquee-container {
            overflow: hidden;
            padding: 40px 0;
            position: relative;
        }

        .testimonial-marquee-container:hover .testimonial-track {
            animation-play-state: paused;
        }

        .testimonial-track {
            display: flex;
            width: calc(380px * 8);
            animation: scrollMarquee 40s linear infinite;
        }

        .testimonial-card {
            width: 350px;
            flex-shrink: 0;
            background-color: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(5px);
            border-radius: 8px;
            padding: 30px;
            margin: 0 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        }

        .stars {
            color: #ffc107;
            font-size: 1.5em;
            margin-bottom: 15px;
        }

        .testimonial-quote {
            font-style: italic;
            color: #555;
            margin: 0 auto 20px auto;
        }

        .testimonial-author {
            font-weight: bold;
            color: var(--dark-blue);
        }

        .testimonial-author span {
            display: block;
            font-weight: normal;
            font-size: 0.9em;
            color: #777;
        }

        .footer {
            background-color: var(--dark-blue);
            color: #ddd;
            padding: 50px 0;
        }

        .footer-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            gap: 40px;
        }

        .footer-column {
            flex: 1;
            min-width: 200px;
        }

        .footer-column h4 {
            color: #fff;
            margin-bottom: 15px;
        }

        .footer-column ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .footer-column ul li {
            margin-bottom: 10px;
        }

        .footer-column a {
            color: #ddd;
            text-decoration: none;
            transition: color 0.3s;
        }

        .footer-column a:hover {
            color: var(--primary-color);
        }

        .social-icons {
            display: flex;
            gap: 20px;
        }

        .social-icons a svg {
            width: 24px;
            height: 24px;
            fill: #ddd;
            transition: fill 0.3s;
        }

        .social-icons a:hover svg {
            fill: var(--primary-color);
        }

        .footer-bottom {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #444;
            font-size: 0.9em;
            color: #aaa;
        }

        /* Responsive Styles */
        @media (max-width: 768px) {
            .video-content-wrapper {
                flex-direction: column;
            }

            .text-column {
                text-align: center;
                margin-top: 30px;
            }

            .footer-container {
                flex-direction: column;
                text-align: center;
            }

            .social-icons {
                justify-content: center;
            }
        }
        
        /* === NEW MODAL STYLES === */
        #registration-modal {
            /* Full screen container */
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1001; /* Above header */
            padding: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s, visibility 0.3s;
        }

        #registration-modal.open {
            opacity: 1;
            visibility: visible;
        }

        #modal-overlay {
            /* Full screen overlay */
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7); /* Darker overlay */
            backdrop-filter: blur(8px);
            z-index: 1002;
        }

        #modal-content {
            /* The actual modal box */
            position: relative;
            z-index: 1003; /* Above overlay */
            background: linear-gradient(145deg, #ffffff, #f0f4ff);
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
            max-width: 800px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            padding: 0;
            transform: scale(0.9);
            transition: transform 0.3s;
        }

        #registration-modal.open #modal-content {
            transform: scale(1);
        }

        #modal-close-btn {
            position: absolute;
            top: 1.5rem;
            right: 1.5rem;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            z-index: 1004;
        }

        #modal-close-btn:hover {
            background: white;
            transform: rotate(90deg);
        }

        #modal-close-btn svg {
            width: 20px;
            height: 20px;
            color: #6c757d;
        }

        .modal-header {
            background: linear-gradient(135deg, var(--primary-color), #5a2beb);
            color: white;
            padding: 2.5rem 2rem;
            border-radius: 16px 16px 0 0;
            text-align: center;
        }

        .modal-header h2 {
            color: white;
            font-size: 2.2rem;
            margin-bottom: 0.5rem;
        }

        .modal-header p {
            font-size: 1.1rem;
            opacity: 0.9;
            max-width: 500px;
            margin: 0 auto;
        }

        .modal-body {
            padding: 2.5rem 2rem;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group.full-width {
            grid-column: 1 / -1;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--dark-blue);
        }

        .form-input {
            width: 100%;
            padding: 1rem 1.2rem;
            border: 1.5px solid #e2e8f0;
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s;
            background: white;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(56, 22, 204, 0.1);
        }

        .form-input.input-error {
            border-color: #e53e3e;
            box-shadow: 0 0 0 3px rgba(229, 62, 62, 0.1);
        }

        .error-message {
            color: #e53e3e;
            font-size: 0.875rem;
            margin-top: 0.5rem;
            display: none;
        }

        .form-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px solid #e2e8f0;
        }

        .back-button {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: none;
            border: none;
            color: var(--primary-color);
            font-weight: 600;
            cursor: pointer;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            transition: all 0.3s;
        }

        .back-button:hover {
            background: rgba(56, 22, 204, 0.05);
        }

        .submit-button {
            background: linear-gradient(135deg, var(--primary-color), #5a2beb);
            color: white;
            border: none;
            padding: 1rem 2.5rem;
            border-radius: 10px;
            font-weight: 600;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(56, 22, 204, 0.3);
        }

        .submit-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(56, 22, 204, 0.4);
        }

        .submit-button:active {
            transform: translateY(0);
        }

        .success-message, .duplicate-message {
            padding: 1.5rem;
            border-radius: 10px;
            margin-bottom: 1.5rem;
            display: none;
        }

        .success-message {
            background: #f0fff4;
            border: 1px solid #9ae6b4;
            color: #276749;
        }

        .duplicate-message {
            background: #fffaf0;
            border: 1px solid #fbd38d;
            color: #744210;
        }

        .message-icon {
            width: 24px;
            height: 24px;
            margin-right: 0.75rem;
        }

        @media (max-width: 768px) {
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .modal-body {
                padding: 2rem 1.5rem;
            }
            
            .modal-header {
                padding: 2rem 1.5rem;
            }
            
            .form-footer {
                flex-direction: column;
                gap: 1rem;
                align-items: stretch;
            }
            
            .back-button {
                justify-content: center;
            }
        }

    </style>
</head>

<body>

    <div class="cursor-spotlight"></div>

    <header class="header">
        <div class="container header-container">
            <a href="https://www.quicken.com/" target="_blank">
                <img src="https://sm.pcmag.com/t/pcmag_uk/review/q/quicken-de/quicken-deluxe_vgph.1920.png"
                    alt="Quicken Logo" class="logo-img">
            </a>
            <a href="https://myaccount.quicken.com/login" target="_blank" class="cta-button"
                style="padding: 10px 20px;">Get Started</a>
        </div>
    </header>

    <main>
        <section class="hero">
            <video autoplay muted id="hero-background-video" class="hero-video"></video>
            <div class="hero-overlay"></div>
            <div class="hero-content container">
                <h1>Effortless Data Protection for Your Business</h1>
                <p>Secure your digital assets with our automated, compliant, and intuitive platform. <br>Peace of mind
                    is just a click away.</p>
                <a href="#pricing" class="cta-button">View Our Plans</a>
            </div>
        </section>

        <section id="features">
            <div class="container">
                <h2>The Security You Need, The Simplicity You Want</h2>
                <p style="max-width: 700px; margin: 0 auto 40px auto;">Our core features are designed to provide
                    complete, automated protection for your most valuable asset: your data.</p>
                <div class="features-grid">
                    <div class="feature-card">
                        <div class="feature-icon">🛡️</div>
                        <h3>Automated Backups</h3>
                        <p>Our system automatically backs up your critical data in real-time, ensuring you never lose a
                            file again.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">🔒</div>
                        <h3>Data Protection</h3>
                        <p>Your data is protected with multiple layers of security to keep your financial information
                            safe from unauthorized access.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <img src="https://quickbooks.intuit.com/oidam/intuit/sbseg/en_us/quickbooks-online/web/icons/icon-support.png"
                                alt="Support Icon" class="feature-img-icon">
                        </div>
                        <h3>Support</h3>
                        <p>Unlimited phone and Tech sessions with our experts.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">🛡️</div>
                        <h3>Dedicated Quicken Anti-Virus</h3>
                        <p>Our built-in antivirus actively scans for and removes threats, protecting your financial data
                            from malware and viruses.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="video-section">
            <div class="container">
                <div class="video-content-wrapper">
                    <div class="video-column">
                        <div class="video-container">
                            <iframe src="https://www.youtube.com/embed/bRhzDL98fM8?rel=0"
                                title="GDPR explained: How the new data protection act could change your life"
                                frameborder="0"
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                allowfullscreen></iframe>
                        </div>
                    </div>
                    <div class="text-column">
                        <h2>Understand Data Protection in Minutes</h2>
                        <p>Regulations like GDPR can be complex. This short video breaks down the essentials, explaining
                            how modern data protection acts can impact your life and business.</p>
                        <p style="font-size: 0.9em; opacity: 0.8; margin-bottom: 25px;">Video: "GDPR explained" by
                            Channel 4 News</p>
                        <a href="http://www.youtube.com/watch?v=acijNEErf-c" target="_blank"
                            class="cta-button cta-secondary">Watch on YouTube</a>
                    </div>
                </div>
            </div>
        </section>

        <!-- === GEMINI PLAN RECOMMENDER SECTION === -->
        <section id="gemini-recommender" class="bg-white py-16">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8 max-w-4xl">
                <h2 class="text-3xl font-extrabold text-center" style="color: var(--dark-blue);">Get a Personalized Plan Recommendation</h2>
                <p class="mt-4 text-lg text-gray-600 text-center max-w-2xl mx-auto">
                    Tell us about your needs, and our AI assistant will suggest the best plan for you.
                </p>
                
                <div class="mt-8">
                    <label for="business-description" class="block text-sm font-medium text-gray-700 text-left">Describe your business or needs:</label>
                    <textarea id="business-description" name="business-description" rows="3"
                        class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                        placeholder="e.g., 'I'm a freelancer with a few clients' or 'I run a small accounting firm with 5 employees and sensitive client data.'"></textarea>
                </div>

                <div class="mt-6 text-center">
                    <button id="analyze-risk-button"
                        class="inline-flex items-center justify-center py-3 px-6 border border-transparent text-base font-medium rounded-md text-white transition-colors duration-200"
                        style="background-color: var(--primary-color);">
                        <!-- Sparkle icon -->
                        <svg id="gemini-button-icon" class="w-5 h-5 mr-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                           <path fill-rule="evenodd" d="M10 3a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 0110 3zM10 15a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 0110 15zM4.03 4.03a.75.75 0 011.06 0l1.06 1.06a.75.75 0 01-1.06 1.06L4.03 5.09a.75.75 0 010-1.06zm10.91 10.91a.75.75 0 011.06 0l1.06 1.06a.75.75 0 01-1.06 1.06l-1.06-1.06a.75.75 0 010-1.06zM3 10a.75.75 0 01.75-.75h1.5a.75.75 0 010 1.5h-1.5A.75.75 0 013 10zm13.25 0a.75.75 0 01.75-.75h1.5a.75.75 0 010 1.5h-1.5a.75.75 0 01-.75-.75zM4.03 15.97a.75.75 0 010-1.06l1.06-1.06a.75.75 0 011.06 1.06l-1.06 1.06a.75.75 0 01-1.06 0zm10.91-10.91a.75.75 0 010-1.06l1.06-1.06a.75.75 0 011.06 1.06l-1.06 1.06a.75.75 0 01-1.06 0z" clip-rule="evenodd" />
                        </svg>
                        <!-- Loading spinner -->
                        <svg id="gemini-loading-spinner" class="animate-spin -ml-1 mr-3 h-5 w-5 text-white hidden" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                        </svg>
                        <span id="gemini-button-text">✨ Find My Plan</span>
                    </button>
                </div>

                <!-- AI Result Display -->
                <div id="gemini-result-container" class="mt-8 hidden">
                    <h3 class="text-2xl font-bold text-left" style="color: var(--dark-blue);">Our AI Recommendation:</h3>
                    <div class="mt-4 p-6 bg-gray-50 rounded-lg border border-gray-200 text-left">
                        <div class="mb-4">
                            <span class="block text-sm font-medium text-gray-500">Recommended Plan:</span>
                            <span id="gemini-plan-name" class="text-2xl font-bold" style="color: var(--primary-color);"></span>
                        </div>
                        <div>
                            <span class="block text-sm font-medium text-gray-500">Why this plan:</span>
                            <p id="gemini-reasoning" class="text-gray-700" style="white-space: pre-wrap;"></p>
                        </div>
                    </div>
                </div>

                <!-- AI Error Display -->
                <div id="gemini-error-container" class="mt-6 p-4 rounded-md bg-red-50 border border-red-300 hidden">
                    <div class="flex">
                        <div class="flex-shrink-0">
                            <svg class="h-5 w-5 text-red-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" />
                            </svg>
                        </div>
                        <div class="ml-3">
                            <p class="text-sm font-medium text-red-800">An error occurred.</p>
                            <p id="gemini-error-text" class="mt-1 text-sm text-red-700">Could not get recommendation. Please try again.</p>
                        </div>
                    </div>
                </div>

            </div>
        </section>


        <section id="pricing">
            <div class="container">
                <h2>Simple, Transparent Pricing</h2>
                <div class="toggle-container">
                    <span style="font-weight: bold;">Already have a subscription?</span>
                    <label class="switch">
                        <input type="checkbox" id="price-toggle">
                        <span class="slider round"></span>
                    </label>
                    <span style="color: var(--primary-color); font-weight: bold;">Turn on for 50% OFF!</span>
                </div>
                <div class="pricing-grid">
                    <div class="pricing-card">
                        <h3>Silver</h3>
                        <div class="price-display">
                            <div class="price-duration">1 Year</div>
                            <div class="price-amount" id="price-starter">$599</div>
                        </div>
                        <ul>
                            <li><b>100 MB</b> Secure Storage</li>
                            <li>Automated Daily Backups</li>
                            <li>Monthly Support</li>
                            <li><b><i>All Upgrade & Subscriptions Included</i></b></li>
                            <li><b><i>60-Day Money-Back Guarantee</i></b></li>
                        </ul>
                        <!-- Updated this to a button to open modal -->
                        <button type="button" class="cta-button cta-secondary js-open-modal">Choose Plan</button>
                    </div>
                    <div class="pricing-card popular">
                        <div class="popular-badge">Customer Favorite</div>
                        <h3>Gold</h3>
                        <div class="price-display">
                            <div class="price-duration">3 Years</div>
                            <div class="price-amount" id="price-business">$1198</div>
                        </div>
                        <ul>
                            <li><b>250 MB</b> Secure Storage</li>
                            <li>Automated Real-Time Backups</li>
                            <li>Priority Phone & Email Support</li>
                            <li><b><i>All Upgrade & Subscriptions Included</i></b></li>
                            <li><b><i>60-Day Money-Back Guarantee</i></b></li>
                        </ul>
                        <!-- Updated this to a button to open modal -->
                        <button type="button" class="cta-button js-open-modal">Choose Plan</button>
                    </div>
                    <div class="pricing-card">
                        <h3>Platinum</h3>
                        <div class="price-display">
                            <div class="price-duration">7+3 Years</div>
                            <div class="price-amount" id="price-enterprise">$1698</div>
                        </div>
                        <ul>
                            <li>Unlimited Storage</li>
                            <li>Dedicated Infrastructure</li>
                            <li>24/7 Dedicated Support</li>
                            <li><b><i>All Upgrade & Subscriptions Included</i></b></li>
                            <li><b><i>60-Day Money-Back Guarantee</i></b></li>
                        </ul>
                        <!-- Updated this to a button to open modal -->
                        <button type="button" class="cta-button cta-secondary js-open-modal">Choose Plan</button>
                    </div>
                    <div class="pricing-card">
                        <h3>One Time Fix</h3>
                        <div class="price-display" style="min-height: 85px;">
                        </div>
                        <p>For specific, immediate data protection needs.</p>
                        <ul>
                            <li>Data Protection</li>
                        </ul>
                        <!-- This button remains unchanged -->
                        <a href="#" class="cta-button cta-secondary">Contact Support</a>
                    </div>
                </div>
            </div>
        </section>

        <section id="testimonials">
            <div class="container">
                <h2>Trusted by Professionals</h2>
                <p style="max-width: 700px; margin: 0 auto;">Our clients' success stories speak for themselves. Here's
                    what they have to say.</p>
                <div class="testimonial-marquee-container">
                    <div class="testimonial-track">
                        <div class="testimonial-card">
                            <div class="stars">★★★★★</div>
                            <blockquote class="testimonial-quote">"SecureSphere made data compliance effortless for our
                                startup. The automated backups give me complete peace of mind. It's a must-have
                                service!"</blockquote>
                            <cite class="testimonial-author">Sarah M.<span>Small Business Owner</span></cite>
                        </div>
                        <div class="testimonial-card">
                            <div class="stars">★★★★★</div>
                            <blockquote class="testimonial-quote">"The customer support is top-notch. They helped us
                                migrate our entire system seamlessly. The platform is reliable, fast, and incredibly
                                secure."</blockquote>
                            <cite class="testimonial-author">Mark C.<span>IT Director</span></cite>
                        </div>
                        <div class="testimonial-card">
                            <div class="stars">★★★★★</div>
                            <blockquote class="testimonial-quote">"As a financial consultant, data security is
                                non-negotiable. SecureSphere is the only service I trust with my clients' sensitive
                                information. Highly recommended."</blockquote>
                            <cite class="testimonial-author">Jessica A.<span>Financial Consultant</span></cite>
                        </div>
                        <div class="testimonial-card">
                            <div class="stars">★★★★★</div>
                            <blockquote class="testimonial-quote">"The API access and dedicated infrastructure allowed
                                us to build custom security workflows. It's powerful, flexible, and robust."</blockquote>
                            <cite class="testimonial-author">Kevin T.<span>Lead Developer</span></cite>
                        </div>
                        <!-- Cloned cards for marquee -->
                         <div class="testimonial-card">
                            <div class="stars">★★★★★</div>
                            <blockquote class="testimonial-quote">"SecureSphere made data compliance effortless for our
                                startup. The automated backups give me complete peace of mind. It's a must-have
                                service!"</blockquote>
                            <cite class="testimonial-author">Sarah M.<span>Small Business Owner</span></cite>
                        </div>
                        <div class="testimonial-card">
                            <div class="stars">★★★★★</div>
                            <blockquote class="testimonial-quote">"The customer support is top-notch. They helped us
                                migrate our entire system seamlessly. The platform is reliable, fast, and incredibly
                                secure."</blockquote>
                            <cite class="testimonial-author">Mark C.<span>IT Director</span></cite>
                        </div>
                        <div class="testimonial-card">
                            <div class="stars">★★★★★</div>
                            <blockquote class="testimonial-quote">"As a financial consultant, data security is
                                non-negotiable. SecureSphere is the only service I trust with my clients' sensitive
                                information. Highly recommended."</blockquote>
                            <cite class="testimonial-author">Jessica A.<span>Financial Consultant</span></cite>
                        </div>
                        <div class="testimonial-card">
                            <div class="stars">★★★★★</div>
                            <blockquote class="testimonial-quote">"The API access and dedicated infrastructure allowed
                                us to build custom security workflows. It's powerful, flexible, and robust."</blockquote>
                            <cite class="testimonial-author">Kevin T.<span>Lead Developer</span></cite>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- === NEW REGISTRATION FORM MODAL === -->
        <div id="registration-modal">
            <!-- Overlay -->
            <div id="modal-overlay" class="js-close-modal"></div>
            
            <!-- Modal Content -->
            <div id="modal-content">
                <!-- Close Button -->
                <button id="modal-close-btn" class="js-close-modal">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            
                <!-- Registration Form -->
                <div class="modal-header">
                    <h2>Create Your Account</h2>
                    <p>Complete your registration to start protecting your data with Quicken Secure</p>
                </div>
                
                <div class="modal-body">
                    <!-- Success Message -->
                    <div id="success-message" class="success-message">
                        <div class="flex items-center">
                            <svg class="message-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
                            </svg>
                            <div>
                                <strong>Registration Successful!</strong> Your Account_Details.txt file has started downloading. This window will close automatically.
                            </div>
                        </div>
                    </div>

                    <!-- Duplicate Message -->
                    <div id="duplicate-message" class="duplicate-message">
                        <div class="flex items-center">
                            <svg class="message-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 3.011-1.742 3.011H4.42c-1.53 0-2.493-1.677-1.743-3.011l5.58-9.92zM10 13a1 1 0 100-2 1 1 0 000 2zm-1-4a1 1 0 011-1h.01a1 1 0 110 2H10a1 1 0 01-1-1z" clip-rule="evenodd" />
                            </svg>
                            <div>
                                <strong>Already Registered</strong> An account with this email already exists. No new file will be downloaded.
                            </div>
                        </div>
                    </div>

                    <form id="registerForm">
                        <div class="form-grid">
                            <!-- Name -->
                            <div class="form-group">
                                <label for="first_name" class="form-label">First Name</label>
                                <input type="text" name="first_name" id="first_name" class="form-input" required>
                                <div class="error-message" id="first_name_error">Please enter your first name</div>
                            </div>
                            
                            <div class="form-group">
                                <label for="last_name" class="form-label">Last Name</label>
                                <input type="text" name="last_name" id="last_name" class="form-input" required>
                                <div class="error-message" id="last_name_error">Please enter your last name</div>
                            </div>

                            <!-- Email -->
                            <div class="form-group full-width">
                                <label for="email" class="form-label">Email Address</label>
                                <input type="email" name="email" id="email" class="form-input" required placeholder="you@example.com">
                                <div class="error-message" id="email_error">Please enter a valid email address</div>
                            </div>
                            
                            <!-- Contact Numbers -->
                            <div class="form-group">
                                <label for="contact_number" class="form-label">Contact Number</label>
                                <input type="tel" name="contact_number" id="contact_number" class="form-input" required>
                                <div class="error-message" id="contact_number_error">Please enter your contact number</div>
                            </div>
                            
                            <div class="form-group">
                                <label for="alternate_contact_number" class="form-label">Alternate Contact (Optional)</label>
                                <input type="tel" name="alternate_contact_number" id="alternate_contact_number" class="form-input" placeholder="Same as above if none">
                            </div>

                            <!-- Business & Plan -->
                            <div class="form-group">
                                <label for="company_name" class="form-label">Business Name (Optional)</label>
                                <input type="text" name="company_name" id="company_name" class="form-input" placeholder="NA if none">
                            </div>
                            
                            <div class="form-group">
                                <label for="plan_selector" class="form-label">Select Your Plan</label>
                                <select id="plan_selector" name="plan_selector" class="form-input" required>
                                    <option value="" disabled selected>Please choose a plan</option>
                                    <option value="Silver">Silver</option>
                                    <option value="Gold">Gold</option>
                                    <option value="Platinum">Platinum</option>
                                </select>
                                <div class="error-message" id="plan_selector_error">Please select a plan</div>
                            </div>
                            
                            <!-- Quicken Version -->
                            <div class="form-group full-width">
                                <label for="quicken_version" class="form-label">Quicken Version</label>
                                <select id="quicken_version" name="quicken_version" class="form-input" required>
                                    <option value="" disabled selected>Please select your Quicken version</option>
                                    <option value="Simplyfy">Simplyfy</option>
                                    <option value="Starter">Starter</option>
                                    <option value="Deluxe">Deluxe</option>
                                    <option value="Premier">Premier</option>
                                    <option value="Home & Business">Home & Business</option>
                                </select>
                                <div class="error-message" id="quicken_version_error">Please select your Quicken version</div>
                            </div>
                            
                            <!-- Billing Address -->
                            <div class="form-group full-width">
                                <label for="billing_address" class="form-label">Billing Address</label>
                                <textarea name="billing_address" id="billing_address" class="form-input" rows="3" required></textarea>
                                <div class="error-message" id="billing_address_error">Please enter your billing address</div>
                            </div>
                        </div>
                        
                        <!-- Submit Button -->
                        <div class="form-footer">
                            <button type="button" class="back-button js-close-modal">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                                    <path fill-rule="evenodd" d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"/>
                                </svg>
                                Back to Plans
                            </button>
                            <button type="submit" class="submit-button">Register Account</button>
                        </div>
                    </form>
                </div>
            </div>
            <!-- End of modal content -->
        </div>
        <!-- End of modal -->


    </main>

    <footer class="footer">
        <div class="container footer-container">
            <div class="footer-column">
                <h4><img src="https://sm.pcmag.com/t/pcmag_uk/review/q/quicken-de/quicken-deluxe_vgph.1920.png"
                        alt="Quicken Logo" class="logo-img"></h4>
                <p>Providing top-tier data protection and peace of mind for businesses worldwide. Your security is our
                    priority.</p>
            </div>
            <div class="footer-column">
                <h4>Company</h4>
                <ul>
                    <li><a href="#">About Us</a></li>
                    <li><a href="#">Careers</a></li>
                    <li><a href="#pricing">Pricing</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h4>Resources</h4>
                <ul>
                    <li><a href="#">Blog</a></li>
                    <li><a href="#">Community</a></li>
                    <li><a href="#features">Features</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h4>Follow Us</h4>
                <div class="social-icons">
                    <a href="https://www.facebook.com/" target="_blank" title="Facebook">
                        <svg viewBox="0 0 24 24">
                            <path
                                d="M12 2.04C6.5 2.04 2 6.53 2 12.06C2 17.06 5.66 21.21 10.44 21.96V14.96H7.9V12.06H10.44V9.85C10.44 7.32 11.93 5.96 14.22 5.96C15.31 5.96 16.45 6.15 16.45 6.15V8.62H15.19C13.95 8.62 13.56 9.39 13.56 10.18V12.06H16.34L15.89 14.96H13.56V21.96A10 10 0 0 0 22 12.06C22 6.53 17.5 2.04 12 2.04Z" />
                        </svg>
                    </a>
                    <a href="https://x.com/" target="_blank" title="Twitter">
                        <svg viewBox="0 0 24 24">
                            <path
                                d="M18.901 1.153h3.68l-8.04 9.19L24 22.846h-7.406l-5.8-7.584-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 6.932ZM17.61 20.644h2.039L6.486 3.24H4.298Z" />
                        </svg>
                    </a>
                    <a href="https://www.linkedin.com/" target="_blank" title="LinkedIn">
                        <svg viewBox="0 0 24 24">
                            <path
                                d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 0 1-2.063-2.065 2.064 2.064 0 1 1 2.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.225 0z" />
                        </svg>
                    </a>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; <span id="current-year"></span> Quicken Secure. All Rights Reserved.</p>
        </div>
    </footer>

    <script>
        // === WEBSITE SCRIPT ===

        // --- CURSOR SPOTLIGHT SCRIPT ---
        const spotlight = document.querySelector('.cursor-spotlight');
        if (spotlight) {
            document.addEventListener('mousemove', (e) => {
                spotlight.style.left = e.clientX + 'px';
                spotlight.style.top = e.clientY + 'px';
            });
            const interactiveElements = document.querySelectorAll('a, button, .feature-card, .pricing-card, iframe, .testimonial-card');
            interactiveElements.forEach(el => {
                el.addEventListener('mouseenter', () => spotlight.classList.add('interactive'));
                el.addEventListener('mouseleave', () => spotlight.classList.remove('interactive'));
            });
        }

        // --- 7-SECOND TIMED VIDEO PLAYLIST SCRIPT ---
        const videoElement = document.getElementById('hero-background-video');
        if (videoElement) {
            const videoPlaylist = [
                'https://videos.pexels.com/video-files/3192364/3192364-hd_1920_1080_25fps.mp4',
                'https://videos.pexels.com/video-files/7647253/7647253-hd_1920_1080_24fps.mp4',
                'https://videos.pexels.com/video-files/3198163/3198163-hd_1920_1080_25fps.mp4'
            ];
            let currentVideoIndex = 0;
            function playNextVideoSegment() {
                videoElement.src = videoPlaylist[currentVideoIndex];
                videoElement.load();
                videoElement.play().catch(error => console.log("Autoplay was prevented:", error));
                currentVideoIndex = (currentVideoIndex + 1) % videoPlaylist.length;
                setTimeout(playNextVideoSegment, 7000);
            }
            playNextVideoSegment();
        }

        // --- MARQUEE SCRIPT (Handles testimonial marquee) ---
        const marqueeTrack = document.querySelector('.testimonial-track');
        // Note: Duplicates are already in the HTML to ensure a smooth loop from the start.
        
        // --- PRICING TOGGLE SCRIPT ---
        const priceToggle = document.getElementById('price-toggle');
        if (priceToggle) {
            const priceStarterEl = document.getElementById('price-starter');
            const priceBusinessEl = document.getElementById('price-business');
            const priceEnterpriseEl = document.getElementById('price-enterprise');
            
            // Define original and discount prices
            const prices = {
                starter: { original: 599, discount: 299 }, // Adjusted original to match HTML
                business: { original: 1198, discount: 599 },
                enterprise: { original: 1698, discount: 799 } // Adjusted original to match HTML
            };

            // Set initial prices from the 'original' values
            if (priceStarterEl) priceStarterEl.textContent = `$${prices.starter.original}`;
            if (priceBusinessEl) priceBusinessEl.textContent = `$${prices.business.original}`;
            if (priceEnterpriseEl) priceEnterpriseEl.textContent = `$${prices.enterprise.original}`;

            priceToggle.addEventListener('change', function () {
                if (this.checked) {
                    if (priceStarterEl) priceStarterEl.textContent = `$${prices.starter.discount}`;
                    if (priceBusinessEl) priceBusinessEl.textContent = `$${prices.business.discount}`;
                    if (priceEnterpriseEl) priceEnterpriseEl.textContent = `$${prices.enterprise.discount}`;
                } else {
                    if (priceStarterEl) priceStarterEl.textContent = `$${prices.starter.original}`;
                    if (priceBusinessEl) priceBusinessEl.textContent = `$${prices.business.original}`;
                    if (priceEnterpriseEl) priceEnterpriseEl.textContent = `$${prices.enterprise.original}`;
                }
            });
        }

        // --- FOOTER YEAR SCRIPT ---
        const currentYearEl = document.getElementById("current-year");
        if (currentYearEl) {
            currentYearEl.textContent = new Date().getFullYear();
        }

        // --- SMOOTH SCROLL FOR HERO BUTTON ---
        document.querySelectorAll('a[href="#pricing"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });


        // === GEMINI API SCRIPT ===
        const geminiButton = document.getElementById('analyze-risk-button');
        const geminiButtonIcon = document.getElementById('gemini-button-icon');
        const geminiButtonText = document.getElementById('gemini-button-text');
        const geminiSpinner = document.getElementById('gemini-loading-spinner');
        const geminiResultContainer = document.getElementById('gemini-result-container');
        const geminiErrorContainer = document.getElementById('gemini-error-container');
        const geminiErrorText = document.getElementById('gemini-error-text');
        const businessDescriptionInput = document.getElementById('business-description');
        const geminiPlanName = document.getElementById('gemini-plan-name');
        const geminiReasoning = document.getElementById('gemini-reasoning');

        if (geminiButton) {
            geminiButton.addEventListener('click', handleGeminiAnalysis);
        }

        async function handleGeminiAnalysis() {
            const userQuery = businessDescriptionInput.value;
            if (!userQuery.trim()) {
                showGeminiError("Please describe your business needs first.");
                return;
            }

            setLoadingState(true);

            // System prompt defining the plans and the task
            const systemPrompt = `You are an expert sales assistant for "Quicken Secure". Your job is to recommend one of our three plans to a potential customer based on their needs.

            Here are the plans:
            1.  **Silver**: 1 Year plan. Good for individuals, freelancers, or small businesses with minimal data (100MB storage) and standard support needs.
            2.  **Gold**: 3 Year plan. Our most popular. Best for growing businesses that need real-time backups, more storage (250MB), and priority support.
            3.  **Platinum**: 10 Year plan (7+3). For established businesses, large organizations, or anyone with high-volume, sensitive data. It offers unlimited storage and 24/7 dedicated support.

            The user will describe their needs. You must respond ONLY with a JSON object.
            The JSON object must have two keys:
            1.  "plan_name": A string, containing exactly "Silver", "Gold", or "Platinum".
            2.  "reasoning": A concise, 1-2 sentence summary explaining *why* you chose that plan for them.

            Analyze their description (e.g., "freelancer", "small shop", "accounting firm", "lots of data") and choose the *single best* plan.`;
            
            const apiKey = ""; // API key will be provided by the environment
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;

            // Define the JSON schema for the response
            const responseSchema = {
                type: "OBJECT",
                properties: {
                    "plan_name": { "type": "STRING" },
                    "reasoning": { "type": "STRING" }
                },
                required: ["plan_name", "reasoning"]
            };

            const payload = {
                contents: [{ parts: [{ text: userQuery }] }],
                systemInstruction: {
                    parts: [{ text: systemPrompt }]
                },
                generationConfig: {
                    responseMimeType: "application/json",
                    responseSchema: responseSchema
                }
            };

            try {
                const response = await callGeminiWithRetry(apiUrl, payload);
                const candidate = response.candidates?.[0];
                const jsonText = candidate?.content?.parts?.[0]?.text;

                if (jsonText) {
                    const parsedJson = JSON.parse(jsonText);
                    if (parsedJson.plan_name && parsedJson.reasoning) {
                        displayGeminiResult(parsedJson.plan_name, parsedJson.reasoning);
                    } else {
                        throw new Error("AI response was missing required JSON fields.");
                    }
                } else {
                    console.error("Invalid response structure from Gemini:", response);
                    showGeminiError("The AI assistant returned an unexpected response. Please try again.");
                }

            } catch (error) {
                console.error("Error calling Gemini API:", error);
                showGeminiError("An error occurred while contacting the AI assistant. Please check your connection and try again.");
            } finally {
                setLoadingState(false);
            }
        }

        async function callGeminiWithRetry(apiUrl, payload, retries = 3, delay = 1000) {
            for (let i = 0; i < retries; i++) {
                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        if (response.status >= 400 && response.status < 500) {
                            throw new Error(`Client error: ${response.status} ${response.statusText}`);
                        }
                        throw new Error(`Server error: ${response.status} ${response.statusText}`);
                    }
                    return await response.json();
                
                } catch (error) {
                    if (i === retries - 1) {
                        console.error("Gemini API call failed after retries:", error);
                        throw error;
                    }
                    await new Promise(resolve => setTimeout(resolve, delay * Math.pow(2, i)));
                }
            }
        }

        function setLoadingState(isLoading) {
            if (isLoading) {
                geminiButton.disabled = true;
                geminiButtonIcon.classList.add('hidden');
                geminiSpinner.classList.remove('hidden');
                geminiButtonText.textContent = 'Recommending...';
                geminiResultContainer.classList.add('hidden');
                geminiErrorContainer.classList.add('hidden');
            } else {
                geminiButton.disabled = false;
                geminiButtonIcon.classList.remove('hidden');
                geminiSpinner.classList.add('hidden');
                geminiButtonText.textContent = '✨ Find My Plan';
            }
        }

        function displayGeminiResult(planName, reasoning) {
            geminiPlanName.textContent = planName;
            geminiReasoning.textContent = reasoning;
            geminiResultContainer.classList.remove('hidden');
        }

        function showGeminiError(message) {
            geminiErrorText.textContent = message;
            geminiErrorContainer.classList.remove('hidden');
        }


        // === NEW REGISTRATION MODAL & FORM SCRIPT ===
        
        // --- Modal Control ---
        const modal = document.getElementById('registration-modal');
        const openModalButtons = document.querySelectorAll('.js-open-modal');
        const closeModalButtons = document.querySelectorAll('.js-close-modal');

        function openModal() {
            if (modal) {
                modal.classList.add('open');
                document.body.style.overflow = 'hidden'; // Prevent scrolling
                // Clear old messages
                document.getElementById('success-message').style.display = 'none';
                document.getElementById('duplicate-message').style.display = 'none';
                document.getElementById('registerForm').reset();
                
                // Reset error messages
                document.querySelectorAll('.error-message').forEach(el => {
                    el.style.display = 'none';
                });
                document.querySelectorAll('.form-input').forEach(el => {
                    el.classList.remove('input-error');
                });
            }
        }
        
        function closeModal() {
            if (modal) {
                modal.classList.remove('open');
                document.body.style.overflow = ''; // Re-enable scrolling
            }
        }

        openModalButtons.forEach(button => {
            button.addEventListener('click', openModal);
        });

        closeModalButtons.forEach(button => {
            button.addEventListener('click', closeModal);
        });
        
        // Close modal when clicking outside the content
        modal.addEventListener('click', function(e) {
            if (e.target === modal) {
                closeModal();
            }
        });
        
        // Form validation and submission
        const registerForm = document.getElementById('registerForm');
        const successMessage = document.getElementById('success-message');
        const duplicateMessage = document.getElementById('duplicate-message');

        // Form validation function
        function validateForm() {
            let isValid = true;
            const requiredFields = ['first_name', 'last_name', 'email', 'contact_number', 'plan_selector', 'quicken_version', 'billing_address'];
            
            requiredFields.forEach(fieldId => {
                const field = document.getElementById(fieldId);
                const errorElement = document.getElementById(`${fieldId}_error`);
                
                if (!field.value.trim()) {
                    field.classList.add('input-error');
                    errorElement.style.display = 'block';
                    isValid = false;
                } else {
                    field.classList.remove('input-error');
                    errorElement.style.display = 'none';
                }
            });
            
            // Email validation
            const emailField = document.getElementById('email');
            const emailError = document.getElementById('email_error');
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            
            if (emailField.value && !emailRegex.test(emailField.value)) {
                emailField.classList.add('input-error');
                emailError.textContent = 'Please enter a valid email address';
                emailError.style.display = 'block';
                isValid = false;
            }
            
            return isValid;
        }
        
        // Handle form submission
        registerForm.addEventListener('submit', function(event) {
            event.preventDefault();
            
            // Hide messages
            successMessage.style.display = 'none';
            duplicateMessage.style.display = 'none';
            
            // Validate form
            if (!validateForm()) {
                return;
            }
            
            // Get form data
            const email = document.getElementById('email').value;
            const quickenVersion = document.getElementById('quicken_version').value;
            
            // Check against last submission (using email as the unique key)
            const lastEmail = localStorage.getItem('lastFormEmail');
            if (lastEmail === email) {
                // Email is identical, show duplicate warning
                duplicateMessage.style.display = 'block';
                return;
            }
            
            // Data is new, proceed with registration
            // Save the new email to prevent re-submission
            localStorage.setItem('lastFormEmail', email);
            
            // Show success message
            successMessage.style.display = 'block';
            
            // Trigger the download
            triggerDownload();
            
            // Auto-close the modal
            setTimeout(() => {
                closeModal();
                registerForm.reset(); // Reset form fields
            }, 3000); // Close modal after 3 seconds
        });

        function triggerDownload() {
            // Get form values
            const firstName = document.getElementById('first_name').value;
            const lastName = document.getElementById('last_name').value;
            const email = document.getElementById('email').value;
            const contactNumber = document.getElementById('contact_number').value;
            const alternateContactNumber = document.getElementById('alternate_contact_number').value || 'N/A';
            const companyName = document.getElementById('company_name').value || 'N/A';
            const planSelector = document.getElementById('plan_selector').value;
            const quickenVersion = document.getElementById('quicken_version').value;
            const billingAddress = document.getElementById('billing_address').value;
            
            // Generate customer ID based on Quicken version
            const customerId = generateCustomerId(quickenVersion);
            
            // Create file content
            const fileContent = `Thank you for choosing Quicken Secure Data Protection!

CUSTOMER ID         : ${customerId}

CONTACT INFORMATION:
TECHNICAL DEPT      : +1 888-810-3336 / +1 800-917-3775 (Toll Free)
DIRECT LINE         : +1 (818)-230-2770
WORKING TIME        : 9:00 AM TO 6:00 PM EST (MONDAY TO FRIDAY)
OUR MERCHANT        : ACE

YOUR DETAILS:
Name                : ${firstName} ${lastName}
Email               : ${email}
Contact Number      : ${contactNumber}
Alternate Contact   : ${alternateContactNumber}
Business Name       : ${companyName}
Selected Plan       : ${planSelector}
Quicken Version     : ${quickenVersion}
Billing Address     : ${billingAddress}

We are committed to providing you with the highest level of data protection and support. If you have any questions or need assistance, please don't hesitate to contact our technical department.

Thank you for trusting us with your data security needs.

Sincerely,
The Quicken Secure Team
`;
            
            const element = document.createElement('a');
            element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(fileContent));
            element.setAttribute('download', 'Account_Details.txt');
            element.style.display = 'none';
            document.body.appendChild(element);
            element.click();
            document.body.removeChild(element);
        }

        // Function to generate customer ID based on Quicken version
        function generateCustomerId(quickenVersion) {
            // Define version codes
            const versionCodes = {
                'Simplyfy': 'SPL',
                'Starter': 'STR',
                'Deluxe': 'DLX',
                'Premier': 'PMR',
                'Home & Business': 'HNB'
            };
            
            // Get current year (last two digits)
            const currentYear = new Date().getFullYear().toString().slice(-2);
            
            // Get code for the selected version
            const versionCode = versionCodes[quickenVersion] || 'GEN';
            
            // Get and increment the counter for this version
            const counterKey = `customerCounter_${versionCode}`;
            let currentCounter = parseInt(localStorage.getItem(counterKey) || '0', 10);
            let newCounter = currentCounter + 1;
            localStorage.setItem(counterKey, newCounter.toString());
            
            // Format the counter as 3-digit number
            const counterString = String(newCounter).padStart(3, '0');
            
            // Return the formatted customer ID
            return `QKN-${currentYear}-${versionCode}-${counterString}`;
        }
        
        // Real-time validation for required fields
        const requiredFields = ['first_name', 'last_name', 'email', 'contact_number', 'plan_selector', 'quicken_version', 'billing_address'];
        
        requiredFields.forEach(fieldId => {
            const field = document.getElementById(fieldId);
            const errorElement = document.getElementById(`${fieldId}_error`);
            
            field.addEventListener('blur', function() {
                if (!field.value.trim()) {
                    field.classList.add('input-error');
                    errorElement.style.display = 'block';
                } else {
                    field.classList.remove('input-error');
                    errorElement.style.display = 'none';
                }
            });
            
            // For email field, also validate format on blur
            if (fieldId === 'email') {
                field.addEventListener('blur', function() {
                    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                    if (field.value && !emailRegex.test(field.value)) {
                        field.classList.add('input-error');
                        errorElement.textContent = 'Please enter a valid email address';
                        errorElement.style.display = 'block';
                    }
                });
            }
        });

    </script>

</body>

</html>